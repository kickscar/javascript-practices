05. 구문(Statement)과 실행(Execution)

## 05\. 구문(Statement)과 실행(Execution)

#### 1\. 구문

 구문(Statement)은 자바스크립트의 실행 단위이다. 파서(parser)라고 부르는 자바스크립트 엔진 내부의 어휘 분석기가 코드의 어휘 분석과 토큰 분리를 한다. 이 과정 중에 적당한 개수의 토큰 모음이 구성되면 그 토큰들을 실행한다. 적당한 개수의 토큰 모음이란 구문의 어휘적 조건을 만족하는 토큰들과 옳은 순서를 의미한다. 구문은 다음과 같은 것들로 구성될 수 있다.

1.  값(Value)
2.  연산자(Operator)
3.  표현식(Expression)
4.  주석(Comment)
5.  예약어(Keyword)

값과 연산자는 표현식을 구성한다. 주석문이라 부르는 주석은 구문을 구성하여도 무시되며 실행되지 않는다. 프로그래밍 입문에서 배우게 되는 기본적인 구문들은 다음 예약어들로 작성할 수 있다.

1.  if, if-else, if-else if
2.  while
3.  do-while
4.  for
5.  switch
6.  for-in
7.  with (deprecated)
8.  debugger
9.  변수 선언(variable declaration)

 앞에서 언급한 예약어들과 구문 구성 요소들아 모여만 있다고 구문이 되는 것은 아니다. 다양한 구문들이 자기들만의 어휘 구조(문법 규칙)을 가지고 있다. 프로그래밍은 이 어휘 구조를 배우고 익히는 것부터 시작한다.

#### 2\. 공백(space), 세미콜론(semicolon) 그리고 개행(line break)

어휘 분석에서 공백(space)는 무시될 수도 있고 토큰 구분에 사용될 수도 있다. 토큰 뒤의 공백은 무시될 것이고 토큰이 발견되기 전까지의 공백은 토큰 구분에 사용된다.

\[예제: ex01\]

```JavaScript
price           + 2000
```

1.  price 뒤의 공백은 price를 식별자(변수) 토큰으로 분리해 낸다.
2.  공백 하나가 토큰을 분리하면 다음 토큰까지의 공백은 10개가 있던 100개가 있던 개수에 상관없이 무시된다.
3.  +는 문자 하나로 연산자 토큰 분리가 가능하기 때문에 뒤의 공백은 바로 무시 된다.

세미콜론(semicolon, ;)은 원칙적으로 구문(Statement)들을 분리하는 역할을 한다. 다음 예제를 보면, 세미콜론 구문 분리뿐만 아니라 표현식의 실행도 함께 이해할 수 있다.

\[예제: ex02\]

```JavaScript
a = 10; b = 20;
```

 세미콜론이 두 개의 구문을 분리한다고 했는데 이는 다소 어휘적 표현이고 내부적으로는 세미콜론을 만나기 전까지 토큰 모음을 실행한다. 보통, 코드를 작성하게 되면 구문을 구분하기 위해 세미콜론을 사용하기 때문에 두 개의 구문을 분리하는 것으로 보인다. 예제에서 세미콜론 앞의 코드 모음은 대입 표현식이다. 세미콜론을 만나면 실행되기 때문에 이 표현식은 실행된다. 실행 단위를 구문이라 했기때문에 이 표현식을 표현식 구문(Expression Statement)이라 한다. 가운데 세미콜론을 뺀 같은 코드의 예제를 살펴보자.
 
\[예제: ex03\]

```JavaScript
a = 10 b = 20;
```

 맨 뒤의 세미콜론때문에 표현식 구문이 되어 실행된다. 두 표현식 사이에 공백은 앞에서 설명한대로 토큰 분리 역할을 한다. 이 토큰 모음(표현식 구문)은 리터럴 뒤에 식별자가 바로 올 수 없는 문법 오류가 있다. 따라서 문법 오류(Syntax Error)가 발생한다. 그러면 공백을 개행(line break)으로 바꾼 다음 예제을 살펴보자.

\[예제: ex04\]

```JavaScript
a = 10
b = 20;
```

 실행에 문제가 없다. 이 예제에서는 개행이 세미콜론 역할을 하기 때문이다. 개행이 세미콜론으로 대체된 것이라 보면 되는데 마치 세미콜론이 자동으로 삽입된 것(Automatic Semicolon Insertion)처럼 보이기도 한다. 노드로 이 예제를 디버깅 해보면 설명한 대로 실행되는 것을 알 수 있다. 
 
 
 
 
 이 이유로 라인끝에 세미콜론이 없는 자바스크립트 코드도 많이 보인다. 자바스크립트는 실행을 위해 또는 구문 구분을 위해 세미콜론을 반드시 붙혀야 한다고 강제하지 않기 때문에 반드시 붙혀야 하는 것은 아니다. 하지만 이해하고 넘어가야 할 것이 있다. 다음 예제를 보자.  

\[예제: ex05\]

```JavaScript
i
=
10
console.log(i)
```

 개행이 세미콜론의 대체쯤으로 이해하면 i; 10;는 문제 없지만 =;는 이항 연산자의 충족 조건을 어긴 문법 오류다. 하지만 실행에 별문제가 없다. 이유는 개행은 어떤 경우에는 공백과 마찬가지로 토큰을 분리하는 역할을 한다. 따라서 이 코드는 아무 문제 없이 실행될 뿐만 아니라 3번 라인의 개행은 세미콜론 역할을 하기 때문에 대입 표현식이 실행되어 정상적으로 10이 출력된다. 그러면 개행이 언제 세미콜론 또는 토큰 분리의 역할을 하는지 그 기준이 궁금할 것이다. 그 기준은 생각 외로 간단한데 최대한 옳은 어휘(문법)으로 개행을 해석하려 한다는 것이다. 앞의 예제에 이 기준을 적용해보자.
 
1. 1번 라인에서 개행이 세미콜론으로 대체되면 1번 라인은 옳은 어휘이다. 이전에 i 이름의 변수 정의가 되지 않았기 때문에 오류라 생각할 수도 있지만 그 것은 실행 오류이고 지금은 전적으로 어휘적 오류(문법 오류)의 여부만 기준으로 적용한다. 하지만 2번 라인에서 문법 오류가 있기 때문에 세미콜론 보다는 토큰 분리 역할을 한다.
2. 2번 라인도 세미콜론으로 대체된다면 지금까지의 토큰 모음(1=)이 어휘적으로 옳지 않다. 따라서 토큰 분리 역할을 한다.
3. 3번 라인에서 개행이 세미콜론으로 대체되면 지금까지 토큰 모음(i=10)과 다음 토큰도 표현식으로 문제가 없다. 따라서 세미콜론으로 대체되어 실행된다.
4. 4번 라인은 코드의 마지막으로 실행된다.

 확인해보는 방법은 디버깅이다. 디버깅한 결과는 다음과 같다.
 
 
 
 
 그리고 에러가 있는 다음 예제에서 에러의 발생 유무보다 에러의 종류를 이해해 보면 개행의 역할을 이해하는 데 도움이 된다.

\[예제: ex06\]

```JavaScript
console
.lo
g('Hello World')
```

1. 1번 라인의 개행이 세미콜론으로 대체되면 1번 라인 자체는 문제가 없지만 2번 라인이 문제가 된다. 따라서 토큰 분리 역할을 한다.
2. 2번 라인의 개행이 세미콜론으로 대체 되면 지금까지의 표현식 'console.lo'과 3번 라인의 표현식 g('Hello World')이 큰 문제가 없다. 따라서 세미콜론으로 대체되어 실행된다.(아무일도 안 벌어진다)
3. 3번 라인의 개행은 세미콜론의 역할로 표현식을 실행하지만 함수 식별자 'g'에 매핑된 함수 객체가 없기 때문에 참조 오류(Reference Error)가 발생한다.

 이 예제를 디버깅한 결과는 다음과 같다. 세미콜론을 생략한 코드 실행이 궁금하면 지금까지 확인해 본 것 처럼 디버깅을 해보면 된다. 그런데 디버깅을 해서 실행 과정을 확인해야 한다면 의도한 실행 구문 뒤에 세미콜론을 붙히는 것이 바람직하다.

#### 3\. 실행(Execution)
 코드가 실행되면 엔진 내부에는 어떤 일이 벌어진다. 작성자가 의도한 실행 코드는 엔진에 내려진 명령이고 엔진이 그 코드를 실행하면 엔진 내부에 어떤 변화가 생길 것이라고 어렵지 않게 추측할 수 있다. '어떤 값을 저장하는 변수를 생성하라', '연산을 하라', 또는 '연산 결과를 어떤 변수에 저장하라', '함수 객체를 생성하라', '이 이름으로 참조하는 함수 객체의 코드를 실행하라' 등등 엔진에 내리는 명령, 즉 실행 코드는 예를 들수 없을 정도로 다양하고 많다. 그리고 이런 명령들을 자바스크립트에서는 구문이라 설명하였다.
 프로그램이 시작하여 종료될 때까지 엔진은 지속적으로 어떤 코드를 실행하고 그 변화를 유지해서 다음 코드의 실행에 반영해야 한다. 이러한 지속적인 코드의 실행을 보장하는 환경을 ㅌ     
